<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Category Carousel</title>
  <style>
    .carousel-container {
      display: flex;
      align-items: center;
      width: 100%;
      overflow: hidden;
      padding: 20px;
      box-sizing: border-box;
    }

    .carousel {
      overflow: hidden;
      flex-grow: 1;
      position: relative;
    }

    .cards-wrapper {
      display: flex;
      transition: transform 0.4s ease-in-out;
      will-change: transform;
      align-items: center;
    }

    .card {
      position: relative;
      background-image: url("../assets/Group 5[1].png");
      border-radius: 10px;
      padding: 10px;
      margin: 10px;
      min-width: 100px;
      text-align: center;
      box-sizing: border-box;
      flex: 0 0 auto;
      height: 218px;
    }

    /* Category card styles */
    .category-card img {
      width: 100%;
      border-radius: 8px;
      height: 100%;
    }

    .category-label {
      position: absolute;
        top: 15px;
        right: 15px;
        background-color: white;
        padding: 6px 18px;
        border-radius: 6px;
        font-size: 13px;
        font-weight: bold;
    }

    .shop-now-btn {
      position: absolute;
        bottom: -10px;
        left: 50%;
        transform: translateX(-50%);
        background-color: #A10404;
        color: white;
        border: none;
        padding: 10px 30px;
        border-radius: 4px;
        cursor: pointer;
        font-weight: bold;
        font-size: 14px;
        transition: all 0.3s ease;
        text-wrap: nowrap;
    }
    @media (max-width:1216px) {
      .shop-now-btn{
        font-size: 12px;
        text-wrap: nowrap;
      }
    }

    @media (max-width:572px) {
      .shop-now-btn{
        padding: 10px 20px;
      }
    }

    @media (max-width:490px) {
      .shop-now-btn{
        padding: 8px 15px;
      }
    }
    @media (max-width:464px) {
      .shop-now-btn{
        padding: 5px 10px;
      }
    }
    @media (max-width:424px) {
      .shop-now-btn{
        padding: 10px 30px;
      }
    }

    .shop-now-btn:hover {
      background-color: #690404;
    }

    /* Extra Large Desktop: 5 cards */
    @media (min-width: 1441px) { .card { width: calc(100% / 5 - 20px); } }
    /* Desktop: 4 cards */
    @media (min-width: 1025px) and (max-width: 1440px) { .card { width: calc(100% / 4 - 20px); } }
    /* Tablet: 3 cards */
    @media (min-width: 768px) and (max-width: 1024px) { .card { width: calc(100% / 3 - 20px); } }
    /* Small tablet / large mobile: 2 cards */
    @media (min-width: 425px) and (max-width: 767px) { .card { width: calc(100% / 2 - 20px); } }
    /* Mobile: 1 card */
    @media (max-width: 424px) { .card { width: calc(100% / 1 - 20px); } }


    .nav-btn {
      font-size: 15px;
      background: none;
      border: none;
      cursor: pointer;
      background-color: #3F3F3F;
      border-radius: 50%;
      color: white;
      text-align: center;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .nav-btn:disabled {
      opacity: 0.3;
      cursor: not-allowed;
    }
  </style>
</head>
<body>
  <div class="carousel-container">
    <button id="prevBtn" class="nav-btn" disabled>❮</button>

    <div class="carousel" id="carousel">
      <div class="cards-wrapper" id="cardsWrapper">

        <!-- Category Cards -->
        <div class="card category-item">
          <div class="category-card">
            <img src="../assets/Rectangle 355.png" alt="Jewellery" />
            <span class="category-label">Jewellery</span>
          </div>
          <button class="shop-now-btn">Shop Now</button>
        </div>

        <div class="card category-item">
          <div class="category-card">
            <img src="../assets/Rectangle 2(1).png" alt="Kitchen ware" />
            <span class="category-label">Kitchen ware</span>
          </div>
          <button class="shop-now-btn">Shop Now</button>
        </div>

        <div class="card category-item">
          <div class="category-card">
            <img src="../assets/ractangle3.png" alt="Home decor" />
            <span class="category-label">Home decor</span>
          </div>
          <button class="shop-now-btn">Shop Now</button>
        </div>

        <div class="card category-item">
          <div class="category-card">
            <img src="../assets/Rectangle 5.png" alt="Wall Art" />
            <span class="category-label">Wall Art</span>
          </div>
          <button class="shop-now-btn">Shop Now</button>
        </div>

        <div class="card category-item">
          <div class="category-card">
            <img src="../assets/Rectangle 6.png" alt="Pottery" />
            <span class="category-label">Pottery</span>
          </div>
          <button class="shop-now-btn">Shop Now</button>
        </div>

                <div class="card category-item">
          <div class="category-card">
            <img src="../assets/Rectangle 355.png" alt="Jewellery" />
            <span class="category-label">Jewellery</span>
          </div>
          <button class="shop-now-btn">Shop Now</button>
        </div>

        <div class="card category-item">
          <div class="category-card">
            <img src="../assets/Rectangle 2(1).png" alt="Kitchen ware" />
            <span class="category-label">Kitchen ware</span>
          </div>
          <button class="shop-now-btn">Shop Now</button>
        </div>

        <div class="card category-item">
          <div class="category-card">
            <img src="../assets/ractangle3.png" alt="Home decor" />
            <span class="category-label">Home decor</span>
          </div>
          <button class="shop-now-btn">Shop Now</button>
        </div>

        <div class="card category-item">
          <div class="category-card">
            <img src="../assets/Rectangle 5.png" alt="Wall Art" />
            <span class="category-label">Wall Art</span>
          </div>
          <button class="shop-now-btn">Shop Now</button>
        </div>

        <div class="card category-item">
          <div class="category-card">
            <img src="../assets/Rectangle 6.png" alt="Pottery" />
            <span class="category-label">Pottery</span>
          </div>
          <button class="shop-now-btn">Shop Now</button>
        </div>

      </div>
    </div>

    <button id="nextBtn" class="nav-btn">❯</button>
  </div>

  <script>
    const cardsWrapper = document.getElementById("cardsWrapper");
    const cards = Array.from(document.querySelectorAll(".card"));
    const prevBtn = document.getElementById("prevBtn");
    const nextBtn = document.getElementById("nextBtn");
    const carousel = document.getElementById("carousel");

    let currentIndex = 0;
    let cardsPerView = 1;

    function getCardsPerViewFromCSS() {
    if (window.matchMedia("(min-width:1441px)").matches) return 5;
    if (window.matchMedia("(min-width:1025px) and (max-width:1440px)").matches) return 4;
    if (window.matchMedia("(min-width:768px) and (max-width:1024px)").matches) return 3;
    if (window.matchMedia("(min-width:425px) and (max-width:767px)").matches) return 2;
    return 1; // width < 425px
}


    function getHorizontalMargin(el) {
      const style = getComputedStyle(el);
      return parseFloat(style.marginLeft || 0) + parseFloat(style.marginRight || 0);
    }

    function calculateLayout() {
      if (!cards.length) return;

      cardsPerView = getCardsPerViewFromCSS();

      if (currentIndex + cardsPerView > cards.length) {
        currentIndex = Math.max(0, cards.length - cardsPerView);
      }

      updateCarousel();
    }

    function updateButtons() {
      const allVisible = cardsPerView >= cards.length;

      if (allVisible) {
        prevBtn.disabled = true;
        nextBtn.disabled = true;
        return;
      }

      prevBtn.disabled = currentIndex === 0;
      nextBtn.disabled = (currentIndex + cardsPerView) >= cards.length;
    }

    function updateCarousel() {
        if (!cards.length) return;

        const cardRect = cards[0].getBoundingClientRect();
        const cardFullWidth = Math.round(cardRect.width + getHorizontalMargin(cards[0]));

        const containerWidth = Math.floor(carousel.clientWidth);
        const totalCards = cards.length;
        const totalWidth = totalCards * cardFullWidth;

        if (totalWidth <= containerWidth) {
            const offset = Math.round((containerWidth - totalWidth) / 2);
            cardsWrapper.style.transform = `translateX(${offset}px)`;
        } else {
            let translateX = -currentIndex * cardFullWidth;

            const visibleWidth = cardsPerView * cardFullWidth;
            const overflow = totalWidth - visibleWidth;

            if (currentIndex + cardsPerView >= totalCards) {
                translateX = -overflow;
            }

            cardsWrapper.style.transform = `translateX(${translateX}px)`;
        }

        updateButtons();
    }

    nextBtn.addEventListener("click", () => {
      currentIndex += cardsPerView;

      if (currentIndex + cardsPerView > cards.length) {
        currentIndex = cards.length - cardsPerView;
        if (currentIndex < 0) currentIndex = 0;
      }

      updateCarousel();
    });

    prevBtn.addEventListener("click", () => {
      currentIndex -= cardsPerView;
      if (currentIndex < 0) currentIndex = 0;
      updateCarousel();
    });

    let resizeObserver = null;
    function startObservers() {
      window.addEventListener("resize", calculateLayout);

      if ('ResizeObserver' in window) {
        resizeObserver = new ResizeObserver(calculateLayout);
        resizeObserver.observe(carousel);
        resizeObserver.observe(cardsWrapper);
      }
    }

    window.requestAnimationFrame(() => {
      calculateLayout();
      startObservers();
    });
  </script>
</body>
</html>
